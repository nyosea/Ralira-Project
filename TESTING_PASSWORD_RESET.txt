ğŸ¬ PASSWORD RESET - QUICK TESTING GUIDE
========================================

Step-by-step walkthrough untuk testing fitur

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‘‰ STEP 1: RUN MIGRATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Buka browser: http://localhost/ralira_project/run_migration.php
2. Tunggu loading...
3. Lihat output:
   âœ“ Migration 1: Add password reset columns
   âœ“ Migration 2: Add login_method column  
   âœ“ Migration 3: Add indexes for performance
   âœ“ All migrations completed!
4. Click "Go to Login" atau kembali ke login page

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‘‰ STEP 2: TEST WITH MANUAL REGISTER USER
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A. REGISTER
   1. Klik: pages/auth/register.php
   2. Isi form:
      - Name: "Test User"
      - Email: "test@example.com" (ingat email ini!)
      - Phone: "081234567890"
      - Password: "testpass123"
      - Confirm: "testpass123"
   3. Click "Daftar"
   4. Tunggu redirect ke login page

B. TEST FORGOT PASSWORD
   1. Klik "Lupa Password?" di login page
   2. Masukkan email: "test@example.com"
   3. Click "Kirim Link Reset"
   4. EXPECTED OUTPUT:
      âœ“ "Email reset password telah dikirim ke: test@example.com"
      âœ“ Pesan: "Silakan cek email Anda dalam 1 jam"
   
   (Di development mode, check browser console atau PHP logs)

C. RESET PASSWORD
   1. Buka browser console (F12)
   2. Cari token di logs/console
   3. Construct URL: 
      http://localhost/ralira_project/pages/auth/reset-password.php?token=YOUR_TOKEN
   4. Masukkan password baru: "newpass456"
   5. Confirm: "newpass456"
   6. Click "Reset Password"
   7. EXPECTED OUTPUT:
      âœ“ "Password berhasil direset!"
      âœ“ "Silakan masuk dengan password baru Anda"
      âœ“ Button "Masuk Sekarang" visible

D. LOGIN WITH NEW PASSWORD
   1. Click "Masuk Sekarang"
   2. Email: "test@example.com"
   3. Password: "newpass456"
   4. Click "Masuk"
   5. EXPECTED: Login berhasil â†’ Dashboard client

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‘‰ STEP 3: TEST WITH GOOGLE OAUTH USER
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A. LOGIN WITH GOOGLE
   1. Di login page, click "Masuk dengan Google"
   2. Pilih akun Google Anda
   3. Tunggu redirect ke dashboard

B. TEST FORGOT PASSWORD
   1. Logout: click logout link (biasanya di header)
   2. Klik "Lupa Password?"
   3. Masukkan email Google Anda (contoh: yourname@gmail.com)
   4. Click "Kirim Link Reset"
   5. EXPECTED OUTPUT:
      âœ“ BUKAN "Email reset password telah dikirim"
      âœ“ SEBALIKNYA: Special message:
         "â„¹ï¸ Akun Google OAuth"
         "Akun yourname@gmail.com Anda terdaftar menggunakan Google"
         "Untuk keamanan, silakan gunakan tombol 'Masuk dengan Google'"
      âœ“ Dua tombol tersedia:
         - "Kembali ke Login"
         - "Daftar Akun Baru"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‘‰ STEP 4: TEST EDGE CASES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A. INVALID EMAIL
   1. Klik "Lupa Password?"
   2. Masukkan: "nonexistent@email.com"
   3. Click "Kirim Link Reset"
   4. EXPECTED:
      âœ“ "Jika email terdaftar, kami akan mengirim link reset password"
      âœ“ No email actually sent (security)

B. EMPTY EMAIL
   1. Klik "Lupa Password?"
   2. Leave email blank
   3. Click "Kirim Link Reset"
   4. EXPECTED:
      âœ“ Browser validation: "Please fill in this field"
      OR
      âœ“ Error message: "Email harus diisi!"

C. EXPIRED TOKEN (Test Later)
   1. Get token dari reset flow
   2. Wait 1 hour (atau modify database manually)
   3. Try to access: reset-password.php?token=OLD_TOKEN
   4. EXPECTED:
      âœ“ "Link reset password tidak valid atau sudah kadaluarsa"
      âœ“ Form tidak visible

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CHECKLIST - SEMUA HARUS BERHASIL

Manual Register Flow:
  â˜‘ Can register with email + password
  â˜‘ Forgot password shows email input
  â˜‘ After submitting, shows success message
  â˜‘ Token is generated (check logs)
  â˜‘ Reset password form works
  â˜‘ Can set new password
  â˜‘ Can login with new password

Google OAuth Flow:
  â˜‘ Can login with Google
  â˜‘ Forgot password detects Google user
  â˜‘ Shows special message "Akun Google OAuth"
  â˜‘ Suggests "Masuk dengan Google"
  â˜‘ Two buttons visible and clickable

UI/UX:
  â˜‘ Design matches login/register pages
  â˜‘ Mobile responsive (test on phone)
  â˜‘ Error messages are clear
  â˜‘ Success messages are visible
  â˜‘ All links work correctly

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ› DEBUGGING TIPS

If something doesn't work:

1. Check browser console (F12 â†’ Console tab)
2. Check PHP error logs:
   C:\xampp\apache\logs\error.log (Windows)
   /var/log/apache2/error.log (Linux)

3. Verify database columns exist:
   - Open phpMyAdmin
   - Check 'users' table
   - Should have columns:
     â€¢ reset_token
     â€¢ reset_token_expires
     â€¢ login_method

4. Test token generation:
   - After forgot-password submission, check logs for token
   - Token should be 64 characters (hex format)

5. Check email configuration:
   - In development, mail() might be simulated
   - Check if SMTP is configured in php.ini

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¾ DATABASE QUERY FOR TESTING

Open phpMyAdmin and run:

-- Check users table structure
DESCRIBE users;

-- See reset tokens (if any exist)
SELECT user_id, email, login_method, reset_token, reset_token_expires 
FROM users 
WHERE reset_token IS NOT NULL;

-- Manual test - insert reset token
UPDATE users 
SET reset_token = 'test_token_12345',
    reset_token_expires = DATE_ADD(NOW(), INTERVAL 1 HOUR)
WHERE email = 'test@example.com';

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ NOTES

- Development mode: password reset tokens visible in logs
- Production mode: tokens sent via email only (secure)
- Default token expiry: 1 hour (configurable)
- bcrypt hashing ensures passwords are secure
- Google users CANNOT reset password (by design - safe)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ¨ DONE! If all tests pass, feature is ready to use.

For full documentation: docs/PASSWORD_RESET_SETUP.md
