â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                            â•‘
â•‘                    QUICK START - TEST STEP 4 SEKARANG                      â•‘
â•‘                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â±ï¸ WAKTU TESTING: ~10 menit untuk 1 complete cycle

ğŸ“‹ CHECKLIST PRE-TEST:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Sebelum mulai, pastikan:
â˜‘ XAMPP running (Apache + MySQL)
â˜‘ Database ralira_db sudah ter-import
â˜‘ Browser dapat akses http://localhost/ralira_project/
â˜‘ Browser dengan developer tools (F12) atau text editor untuk lihat error log


ğŸš€ TESTING SCENARIO 1: REGISTER & FORGOT PASSWORD (3 MENIT)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Langkah 1: Register Akun Baru
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Go to: http://localhost/ralira_project/pages/auth/register.php
2. Isikan form:
   - Nama: TestUser Step4
   - Email: test.step4.XXXX@example.com  â† ganti XXXX dengan random number
   - Password: testpass123
   - Ulangi Password: testpass123
   - Role: Klien (Client)
3. Klik "Daftar Sekarang"

Expected:
   âœ“ Registrasi berhasil
   âœ“ Redirect ke login page
   âœ“ Melihat pesan sukses


Langkah 2: Go to Forgot Password
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Di login page, klik "Lupa Password?"
2. Atau direct: http://localhost/ralira_project/pages/auth/forgot-password.php
3. Masukkan email: test.step4.XXXX@example.com (email dari step 1)
4. Klik "Kirim Link Reset"

Expected:
   âœ“ Lihat success message: "Jika email terdaftar, kami akan mengirim..."
   ATAU
   âœ“ Fallback message (untuk XAMPP): "Token reset telah dibuat..."


Langkah 3: Check Database Token
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Buka phpMyAdmin atau command line MySQL:

Query:
  SELECT user_id, email, reset_token, reset_token_expires 
  FROM users 
  WHERE email='test.step4.XXXX@example.com' 
  LIMIT 1;

Expected:
   âœ“ Lihat reset_token (64 character hex string)
   âœ“ reset_token_expires = timestamp dalam 1 jam


ğŸ”§ TESTING SCENARIO 2: GET RESET LINK & ACCESS (5 MENIT)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Option A: Jika Email Terkirim (Email Configured)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Langkah 1: Cek Email
   1. Buka email inbox Anda
   2. Cari email dengan subject: "Reset Password - Biro Psikologi Rali Ra"
   3. Lihat reset link dalam email

Langkah 2: Click Reset Link
   1. Klik tombol "ğŸ” Reset Password" dalam email
   2. Atau copy-paste link dari email

Expected:
   âœ“ Load halaman: pages/auth/reset-password.php?token=...
   âœ“ Form "Reset Password" tampil
   âœ“ Terlihat email yang terdaftar


Option B: Jika Email Tidak Terkirim (XAMPP Development)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Manual: Construct Reset Link dari Database Token

Langkah 1: Ambil Token dari Database
   Query MySQL:
   SELECT reset_token FROM users 
   WHERE email='test.step4.XXXX@example.com' 
   LIMIT 1;

   Copy token hasil query (64 character hex string)

Langkah 2: Manually Construct & Access Reset Link
   URL Format:
   http://localhost/ralira_project/pages/auth/reset-password.php?token=TOKEN_HERE

   Example:
   http://localhost/ralira_project/pages/auth/reset-password.php?token=a1b2c3d4e5f6g7h8...

   Paste di browser address bar

Langkah 3: Access Reset Page
   1. Press Enter
   2. Verifikasi page load dengan form

Expected:
   âœ“ Reset password form tampil
   âœ“ Tidak ada error message
   âœ“ Email confirmation visible di form


ğŸ”„ TESTING SCENARIO 3: RESET PASSWORD (2 MENIT)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Langkah 1: Input Password Baru
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Di halaman reset password form
2. Masukkan:
   - Password Baru: newpass123
   - Konfirmasi Password: newpass123
3. Klik "Reset Password"

Expected:
   âœ“ Success message: "Password berhasil direset! Silakan masuk dengan..."
   âœ“ Form hilang
   âœ“ Tombol "Masuk Sekarang" visible


Langkah 2: Verify Password di Database
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Query MySQL:
  SELECT email, password, reset_token, reset_token_expires 
  FROM users 
  WHERE email='test.step4.XXXX@example.com' 
  LIMIT 1;

Expected:
   âœ“ password = bcrypt hash (starts with $2y$)
   âœ“ reset_token = NULL (sudah di-cleanup!)
   âœ“ reset_token_expires = NULL


Langkah 3: Login dengan Password Baru
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Klik tombol "Masuk Sekarang" dari reset success page
   Atau: http://localhost/ralira_project/pages/auth/login.php
2. Masukkan:
   - Email: test.step4.XXXX@example.com
   - Password: newpass123
3. Klik "Masuk"

Expected:
   âœ“ Login berhasil âœ…
   âœ“ Redirect ke client dashboard
   âœ“ Session terciptakan dengan user_id dan name


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š RESULT SUMMARY SETELAH TESTING:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Jika semua langkah berhasil:
   âœ… STEP 4 IMPROVEMENT VERIFIED WORKING!
   âœ… Reset link generation tidak "stuck" lagi
   âœ… Email sending / fallback bekerja dengan baik
   âœ… Token validation bekerja
   âœ… Password reset bekerja
   âœ… Login dengan password baru bekerja

Complete Flow Status:
   âœ… Register & Create Account
   âœ… Forget Password Form
   âœ… Token Generation & Storage
   âœ… Link Generation & Email
   âœ… Token Validation
   âœ… Password Reset Form
   âœ… Password Update in Database
   âœ… Login dengan Password Baru


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ TROUBLESHOOTING JIKA ADA ERROR:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ISSUE: "Link reset password tidak valid atau sudah kadaluarsa"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Cause: Token sudah expired atau tidak ada di database
Solution:
  1. Cek reset_token_expires di database
  2. Pastikan masih dalam 1 jam
  3. Generate token baru dengan ulangi forgot password


ISSUE: Email tidak received (tapi juga tidak ada error)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Cause: Normal untuk XAMPP development tanpa mail configuration
Solution:
  1. Gunakan Option B: Manual construct reset link dari database
  2. Untuk production, setup SMTP atau PHPMailer
  3. File bantuan: STEP4_IMPROVEMENT_SUMMARY.txt


ISSUE: "Unknown column 'reset_token'"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Cause: Database belum ter-update dengan kolom baru
Solution:
  1. Run migration script: http://localhost/ralira_project/run_migration.php
  2. Atau manual SQL:
     ALTER TABLE users ADD COLUMN reset_token VARCHAR(255) NULL;
     ALTER TABLE users ADD COLUMN reset_token_expires DATETIME NULL;
     CREATE INDEX idx_reset_token ON users(reset_token);


ISSUE: Form tidak muncul / blank page
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Cause: PHP error atau token validation gagal
Solution:
  1. Check error log: c:\xampp\php\logs\php_error_log
  2. Check browser F12 â†’ Console untuk JavaScript error
  3. Verify token ada di database sebelum access reset link


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ REPORTING RESULTS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Setelah testing, silakan report:

âœ… Jika BERHASIL:
  "Testing STEP 4 BERHASIL! Semua langkah berjalan lancar.
   Flow register â†’ forgot password â†’ reset â†’ login dengan password baru âœ…"

âŒ Jika GAGAL:
  "Testing STEP 4 ada error di [step mana]:
   - Error message: [exact message]
   - Browser console error: [if any]
   - Database token: [exists / not exists]
   - PHP error log: [error message]"


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ NEXT ACTIONS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Test dan verify STEP 4 dengan checklist di atas âœ“

2. Jika berhasil, consider untuk:
   - Run full migration: http://localhost/ralira_project/run_migration.php
   - Test dengan Google OAuth user (untuk verify login_method smart flow)
   - Test dengan psychologist user role

3. Dokumentasi lengkap untuk reference:
   - README_PASSWORD_RESET.txt â†’ Overview
   - TESTING_PASSWORD_RESET.txt â†’ Full testing guide
   - STEP4_IMPROVEMENT_SUMMARY.txt â†’ Technical details
   - TESTING_STEP4_IMPROVEMENT.txt â†’ Detailed test cases


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Good luck dengan testing! ğŸš€
Report hasilnya dan kami siap bantu jika ada masalah!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
